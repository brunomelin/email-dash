==============================================
üöÄ COMANDOS PARA DEPLOY NO SERVIDOR
==============================================

‚ö†Ô∏è  IMPORTANTE: Execute esses comandos NO SERVIDOR (via SSH)

==============================================
üìã PARTE 1: PRIMEIRA VEZ (Setup Inicial)
==============================================

# 1. Criar diret√≥rio e clonar reposit√≥rio
mkdir -p ~/apps
cd ~/apps
git clone https://github.com/brunomelin/email-dash.git
cd email-dash

# 2. Criar arquivo .env
nano .env

# Cole isso no arquivo:
DATABASE_URL="postgresql://user:password@localhost:5432/email_dash"
NODE_ENV="production"
PORT=3000

# Salvar: Ctrl+X, depois Y, depois Enter

# 3. Instalar PM2 (se n√£o tiver)
npm install -g pm2

==============================================
üîÑ PARTE 2: DEPLOY/ATUALIZA√á√ÉO
==============================================

# Execute estes comandos em SEQU√äNCIA:

cd ~/apps/email-dash

pm2 stop email-dash || true

git pull origin main

npm ci

npx prisma generate

npx prisma db push --accept-data-loss

npm run build

pm2 restart email-dash || pm2 start npm --name "email-dash" -- start

pm2 save

pm2 logs email-dash --lines 20

==============================================
‚úÖ VERIFICAR SE FUNCIONOU
==============================================

# Ver status
pm2 status

# Ver logs em tempo real
pm2 logs email-dash

# Testar se app est√° respondendo
curl http://localhost:3000

==============================================
üÜò COMANDOS √öTEIS
==============================================

# Ver logs
pm2 logs email-dash

# Reiniciar
pm2 restart email-dash

# Parar
pm2 stop email-dash

# Ver recursos (CPU/Mem√≥ria)
pm2 monit

==============================================
üéØ COMANDO √öNICO (Deploy Completo)
==============================================

# Copie TUDO de uma vez:

cd ~/apps/email-dash && pm2 stop email-dash && git pull origin main && npm ci && npx prisma generate && npx prisma db push --accept-data-loss && npm run build && pm2 restart email-dash && pm2 logs email-dash --lines 20

==============================================

üí° DICA: Salve este arquivo no servidor para refer√™ncia futura!

==============================================

